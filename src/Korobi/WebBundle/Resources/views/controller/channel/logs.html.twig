{% extends 'KorobiWebBundle::layout.html.twig' %}

{% set page_title = channel_name ~ " on " ~ network_name ~ " - Logs" %}

{% block javascripts %}
{{ parent() }}
{% if is_tail %}
<script>
$(document).scrollTop($("#bottom").offset().top);
setInterval(function() {
    $.get('{{ url(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')) }}', function(data) {
        $('div.logs').html(JSON.parse(data));
        $(document).scrollTop($("#bottom").offset().top);
    })
}, 5000);
</script>
{% endif %}
{% endblock %}

{% block body %}
    <h1>Log for {{ channel_name }} on {{ network_name }} - {{ log_date }}</h1>
    <div class="logs">
        {% for message in logs %}
            {{ message|raw }}
        {% endfor %}
    </div>
{% endblock %}
